description: >
  Install the latest MATLAB release on a Linux machine executor. Currently, this command is
  available only for public projects and does not include transformation products, such as MATLAB
  Coder and MATLAB Compiler.

steps:
  - run:
      name: Install MATLAB
      command: |
        # installer does not support the Docker executor type
        if awk -F/ '$2 == "docker"' /proc/self/cgroup | read; then
          echo 'The Docker executor type is not supported.'
          exit 1
        fi

        # install core system dependencies
        wget -qO- --retry-connrefused https://ssd.mathworks.com/supportfiles/ci/matlab-deps/v0/install.sh | sudo -E bash

        # download and execute the installer
        wget -qO- --retry-connrefused https://ssd.mathworks.com/supportfiles/ci/ephemeral-matlab/v0/install.sh | sudo -E bash
